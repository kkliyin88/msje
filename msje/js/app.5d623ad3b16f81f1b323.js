webpackJsonp([1],{"5lR4":function(t,e,s){t.exports=s.p+"img/text.594b2f7.png"},BMyR:function(t,e){},HSvw:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("xd7I"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=s("C7Lr")({name:"App"},i,!1,function(t){s("BMyR")},null,null).exports,n=s("7LQH"),r=s("84iU"),c=s.n(r),p="https://nmp-test.pureh2b.com";function g(t,e,s={}){let o=/\.json$/.test(t);return-1!=t.indexOf("http://")||o||(t=p+t),new Promise(function(o,i){c.a.get(t,e,s).then(t=>{o(t.data)}).catch(t=>{i(t),console.log(t,t)})}).catch(t=>{console.log(t,t)})}c.a.defaults.headers.common.token="afsd20190425";var l=s("g8Jd"),u={props:{show:{type:Boolean,default:!1},type:{type:String},pagetag:{type:String,default:"page1"}},mounted(){console.log("type",this.type)},methods:{close(){console.log("关闭弹窗"),this.$emit("closePop")},gotocouponList(){wx.miniProgram.navigateTo({url:"/pages/usercenter/coupon?itemSelect=1"})},getservice(){wx.miniProgram.navigateTo({url:"/pages/webview"})},goToDetails(t,e){let s="commodityNo:"+t+"  goodsNo:"+e;this.$toast(s),wx.miniProgram.navigateTo({url:"/pages/commodity/detail?commodityNo="+t+"&goodsNo="+e})}}},h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"pop-wrap"},[o("transition",{attrs:{name:"cover"}},[t.show?o("div",{staticClass:"cover"},["page1"==t.pagetag&&"200"==t.type?o("img",{attrs:{src:s("VWOG")}}):t._e(),t._v(" "),"page1"==t.pagetag&&"201"==t.type?o("img",{attrs:{src:s("vtKJ")}}):t._e(),t._v(" "),"page2"==t.pagetag&&"200"==t.type?o("img",{attrs:{src:s("tH0A")}}):t._e(),t._v(" "),"page2"==t.pagetag&&"201"==t.type?o("img",{attrs:{src:s("tH0A")}}):t._e()]):t._e()]),t._v(" "),o("transition",{attrs:{name:"content"}},[t.show?o("div",{staticClass:"pop-container"},[["page1"==t.pagetag&&"201"==t.type?o("div",{staticClass:"pop1"},[o("div",{staticClass:"box"},[o("ul",[o("li",{on:{click:function(e){return e.stopPropagation(),t.goToDetails("TA040351","802-005237")}}}),t._v(" "),o("li",{on:{click:function(e){return e.stopPropagation(),t.goToDetails("KA040113","802-004467")}}})])])]):t._e()],t._v(" "),["page2"==t.pagetag&&"200"==t.type?o("div",{staticClass:"pop3"},[o("div",{staticClass:"gouse"},[o("span",{on:{click:function(t){}}})]),t._v(" "),o("div",{staticClass:"close"},[o("span",{on:{click:t.close}})])]):t._e()],t._v(" "),["page2"==t.pagetag&&"201"==t.type?o("div",{staticClass:"pop3"},[o("div",{staticClass:"gouse"},[o("span",{on:{click:t.gotocouponList}})]),t._v(" "),o("div",{staticClass:"close"},[o("span",{on:{click:t.close}})])]):t._e()]],2):t._e()])],1)},staticRenderFns:[]};var d=s("C7Lr")(u,h,!1,function(t){s("pU2M"),s("cXzB")},"data-v-63b96332",null).exports,m={data:()=>({baseUrl:"https://nmp-test.pureh2b.com",userRegisterProtocolLink:"https://m.purcotton.com/wap/user_register_protocol.html",userphone:"",loading:!1,returnNumber:"",getRegstAgreeNum:1,getAgreeClassObject:{"agree-img":!0,agree:!0,unagree:!1},userRegisterProtocolLink:"https://m.purcotton.com/wap/user_register_protocol.html",getSubmitRegstClassObject:{"submit-btn":!0,gray:!1},submitBtnNum:"1",getconpontype_url:"/api/coupon/ruleId",couponId:"ZH00132",showPop:!1,showType:"null"}),watch:{userphone(){this.userphone.length>11&&(this.userphone=String(this.userphone).slice(0,11))}},created(){},components:{Popup:d},mounted(){document.body.addEventListener("focusout",()=>{let t=navigator.userAgent.toLowerCase();(t.indexOf("iphone")>0||t.indexOf("ipad")>0)&&(document.body.scrollTop=document.body.scrollHeight)})},methods:{goToDetails(t,e){wx.miniProgram.navigateTo({url:"/pages/commodity/detail?commodityNo="+t+"&goodsNo="+e})},submitRegst(t){let e=this.$validationPhone(this.userphone),s=this.getRegstAgreeNum;if(e)return void this.$toast(e);if("0"==s)return void this.$toast("请同意全棉时代用户注册协议");let o="/api/member/webpage/register?phone="+t;this.loading=!0,g(o).then(t=>{this.loading=!1,"200"==t.code&&(this.account=t.data.account,this.getCouponType(this.getconpontype_url,this.account))}).catch(t=>{this.loading=!1})},phoneExit(t){let e="/api/member/webpage/phone?phone="+t;this.loading=!0,g(e).then(e=>{this.loading=!1,"200"==e.code?(this.account=e.data.account,this.getCouponType(this.getconpontype_url,this.account)):"500"==e.code?this.submitRegst(t):this.$toast(e.data.message)}).catch(()=>{this.loading=!1})},getCouponType(t,e){let s=t+("?memberCode="+e+"&ruleId="+this.couponId);this.loading=!0,g(s).then(t=>{this.loading=!1,this.showType=t.code,"201"!=this.showType&&"200"!=this.showType||(this.showPop=!0)}).catch(()=>{this.showType,this.showPop=!0,this.loading=!1})},getAgreeBtn(){console.log("getRegstAgreeNum",this.getRegstAgreeNum),1==this.getAgreeClassObject.agree?(this.getAgreeClassObject.agree=!1,this.getAgreeClassObject.unagree=!0,this.getRegstAgreeNum=0):0==this.getAgreeClassObject.agree&&(this.getAgreeClassObject.agree=!0,this.getAgreeClassObject.unagree=!1,this.getRegstAgreeNum=1)},onFieldBlur(){({ios:!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}).ios&&setTimeout(()=>{const t=document.documentElement.scrollTop||document.body.scrollTop||0;window.scrollTo(0,Math.max(t-1,0))},100)}}},v={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wrap"},[t.showPop?t._e():o("div",{staticClass:"pagebg"},[o("img",{attrs:{src:s("Tzsy")}})]),t._v(" "),t.showPop?t._e():o("div",{staticClass:"container1_box"},[o("div",{staticClass:"container1"},[o("ul",[t._m(0),t._v(" "),o("li",{staticClass:"li2",on:{click:function(e){t.goToDetails="802-004467"}}},[o("img",{attrs:{src:s("XFca")}})])]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),o("div",{staticClass:"input_wrap"},[o("div",{staticClass:"input1"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.userphone,expression:"userphone"}],attrs:{placeholder:"请输入手机号"},domProps:{value:t.userphone},on:{blur:t.onFieldBlur,input:function(e){e.target.composing||(t.userphone=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"agreement-wrap clearfix"},[o("a",{class:t.getAgreeClassObject,attrs:{href:"javascript:;",id:"agreeBtn","data-agree":t.getRegstAgreeNum},on:{click:t.getAgreeBtn}}),t._v(" "),o("a",{staticClass:"agree-link",attrs:{href:t.userRegisterProtocolLink}},[t._v("同意"),o("span",{staticClass:"green"},[t._v("《全棉时代用户注册协议》")])])]),t._v(" "),o("div",{staticClass:"input_wrap"},[o("div",{staticClass:"input3",on:{click:function(e){return t.phoneExit(t.userphone)}}},[o("img",{attrs:{src:s("wRCP")}})])])])]),t._v(" "),t.showPop?o("div",[o("Popup",{attrs:{show:t.showPop,type:t.showType,pagetag:"page1"},on:{closePop:function(){return t.showPop=!1}}})],1):o("div",{staticClass:"contain2"},[o("img",{attrs:{src:s("5lR4")}})])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"li1"},[e("img",{attrs:{src:s("UdxQ")}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text_wrap"},[e("div",{staticClass:"text"},[e("p",[this._v("无门槛兑换,同一用户 收货人每款礼包限兑1次")]),this._v(" "),e("p",[this._v("全场选购满99元包邮,未满邮费用户需要自费8元邮费")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title_wrap"},[e("div",{staticClass:"text"},[this._v("\n\t\t\t\t登录/注册 领取兑换券\n\t\t\t")])])}]};var _=s("C7Lr")(m,v,!1,function(t){s("HSvw")},"data-v-43b28ef0",null).exports,b={data:()=>({baseUrl:"https://nmp-test.pureh2b.com",userRegisterProtocolLink:"https://m.purcotton.com/wap/user_register_protocol.html",userphone:"",loading:!1,returnNumber:"",getRegstAgreeNum:1,getAgreeClassObject:{"agree-img":!0,agree:!0,unagree:!1},userRegisterProtocolLink:"https://m.purcotton.com/wap/user_register_protocol.html",getSubmitRegstClassObject:{"submit-btn":!0,gray:!1},submitBtnNum:"1",getconpontype_url:"/api/coupon/ruleId",couponId:"ZH00132",showPop:!1,showType:"null"}),watch:{userphone(){this.userphone.length>11&&(this.userphone=String(this.userphone).slice(0,11))}},created(){},components:{Popup:d},mounted(){document.body.addEventListener("focusout",()=>{let t=navigator.userAgent.toLowerCase();(t.indexOf("iphone")>0||t.indexOf("ipad")>0)&&(document.body.scrollTop=document.body.scrollHeight)})},methods:{gotoMylist(){wx.miniProgram.navigateTo({url:"/pages/order/list"})},submitRegst(t){let e="/api/member/webpage/register?phone="+t;this.loading=!0,g(e).then(t=>{this.loading=!1,"200"==t.code&&(this.account=t.data.account,this.callbackphone=t.data.phone.substr(0,3)+"****"+t.data.phone.substr(-4),this.getCouponType(this.getconpontype_url,this.account))}).catch(e=>{this.phoneExit(t),this.loading=!1})},phoneExit(t){let e=this.$validationPhone(this.userphone),s=this.getRegstAgreeNum;if(e)return void this.$toast(e);if("0"==s)return void this.$toast("请同意全棉时代用户注册协议");let o="/api/member/webpage/phone?phone="+t;this.loading=!0,g(o).then(e=>{this.loading=!1,"200"==e.code?(this.account=e.data.account,this.callbackphone=e.data.phone.substr(0,3)+"****"+e.data.phone.substr(-4),this.getCouponType(this.getconpontype_url,this.account)):"500"==e.code&&this.submitRegst(t)}).catch(()=>{this.loading=!1})},getCouponType(t,e){let s=t+("?memberCode="+e+"&ruleId="+this.couponId);this.loading=!0,g(s).then(t=>{this.loading=!1,this.showType=t.code,"201"!=this.showType&&"200"!=this.showType||(this.showPop=!0),console.log("showPop",this.showPop)}).catch(()=>{this.loading=!1})},getAgreeBtn(){console.log("getRegstAgreeNum",this.getRegstAgreeNum),1==this.getAgreeClassObject.agree?(this.getAgreeClassObject.agree=!1,this.getAgreeClassObject.unagree=!0,this.getRegstAgreeNum=0):0==this.getAgreeClassObject.agree&&(this.getAgreeClassObject.agree=!0,this.getAgreeClassObject.unagree=!1,this.getRegstAgreeNum=1)},onFieldBlur(){({ios:!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}).ios&&setTimeout(()=>{const t=document.documentElement.scrollTop||document.body.scrollTop||0;window.scrollTo(0,Math.max(t-1,0))},100)}}},f={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wrap"},[t.showPop?t._e():o("div",{staticClass:"pagebg"},[o("img",{attrs:{src:s("NcsK")}})]),t._v(" "),t.showPop?t._e():o("div",{staticClass:"container1"},[o("div",{staticStyle:{position:"relative"}},[t._m(0),t._v(" "),o("div",{staticClass:"content_box"},[t._m(1),t._v(" "),t._m(2),t._v(" "),o("div",{staticClass:"input_wrap"},[o("div",{staticClass:"input1"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.userphone,expression:"userphone"}],attrs:{placeholder:"请输入手机号"},domProps:{value:t.userphone},on:{blur:t.onFieldBlur,input:function(e){e.target.composing||(t.userphone=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"agreement-wrap clearfix"},[o("a",{class:t.getAgreeClassObject,attrs:{href:"javascript:;",id:"agreeBtn","data-agree":t.getRegstAgreeNum},on:{click:t.getAgreeBtn}}),t._v(" "),o("a",{staticClass:"agree-link",attrs:{href:t.userRegisterProtocolLink}},[t._v("同意"),o("span",{staticClass:"green"},[t._v("《全棉时代用户注册协议》")])])]),t._v(" "),o("div",{staticClass:"input_wrap"},[o("div",{staticClass:"input3",on:{click:function(e){return t.phoneExit(t.userphone)}}},[o("img",{attrs:{src:s("unqC")}})])]),t._v(" "),t._m(3)])])]),t._v(" "),t.showPop?o("div",[o("Popup",{attrs:{show:t.showPop,type:t.showType,pagetag:"page2"},on:{closePop:function(){return t.showPop=!1}}})],1):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"img_box"},[e("img",{attrs:{src:s("S8cD")}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{attrs:{src:s("ePDE")}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip"},[e("p",[this._v("- 输入手机号 领取专享优惠券 -")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text_wrap"},[e("img",{attrs:{src:s("Ty4V")}})])}]};var C=s("C7Lr")(b,f,!1,function(t){s("qDsz")},"data-v-b4f7b58a",null).exports;o.a.use(n.a);var w=new n.a({routes:[{path:"/page1",name:"page1",component:_,meta:{title:"全棉时代会员礼包"}},{path:"/page2",name:"page2",component:C,meta:{title:"全棉时代会员礼包"}}]}),y=s("X1H5"),x=s.n(y),P=s("hs12");o.a.prototype.$http=c.a,o.a.prototype.$wx=x.a,o.a.use(P.a),o.a.use(l.f).use(l.b).use(l.a).use(l.c).use(l.e).use(l.d).use(l.g),o.a.config.productionTip=!1,w.beforeEach((t,e,s)=>{t.meta.title&&(document.title=t.meta.title),s()}),new o.a({el:"#app",router:w,components:{App:a},template:"<App/>"}),o.a.prototype.$validationPhone=function(t){var e=t,s="";return 0==e.length?"手机号码不能为空":11!=e.length?"请输入11位有效的手机号码":/^0?(13|14|15|16|17|18|19)[0-9]{9}$/.test(e)?s:"请输入有效手机号"}},NcsK:function(t,e,s){t.exports=s.p+"img/beijing.a28ae9d.png"},S8cD:function(t,e,s){t.exports=s.p+"img/kuangkuang.2f32a9d.png"},Ty4V:function(t,e,s){t.exports=s.p+"img/text.2e40c94.png"},Tzsy:function(t,e,s){t.exports=s.p+"img/beijing.48a236b.png"},UdxQ:function(t,e,s){t.exports=s.p+"img/pic1.19b3d6d.png"},VWOG:function(t,e,s){t.exports=s.p+"img/beijing1.8ec4509.png"},XFca:function(t,e,s){t.exports=s.p+"img/pic2.d3e5337.png"},cXzB:function(t,e){},ePDE:function(t,e,s){t.exports=s.p+"img/youhuiquan.2db62dd.png"},pU2M:function(t,e){},qDsz:function(t,e){},tH0A:function(t,e,s){t.exports=s.p+"img/beijing3.30d07bf.png"},unqC:function(t,e,s){t.exports=s.p+"img/anniu.6823cdd.png"},vtKJ:function(t,e,s){t.exports=s.p+"img/beijing2.ed0799a.png"},wRCP:function(t,e,s){t.exports=s.p+"img/lingquanniu.73c2220.png"}},["NHnr"]);